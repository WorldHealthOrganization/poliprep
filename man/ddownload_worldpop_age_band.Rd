% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download_worldpop_rasters.R
\name{ddownload_worldpop_age_band}
\alias{ddownload_worldpop_age_band}
\title{Download WorldPop Population Raster Data for Specific Age Bands}
\usage{
ddownload_worldpop_age_band(
  country_codes,
  years,
  age_range = c(1, 9),
  out_dir = "."
)
}
\arguments{
\item{country_codes}{Character string. Three-letter ISO country code (e.g., "TUN"
for Tunisia)}

\item{years}{Numeric vector. Years for which to download data (e.g.,
c(2020, 2021))}

\item{age_range}{Numeric vector of length 2 specifying the [lower, upper]
age range bounds. Default: c(1, 9)}

\item{out_dir}{Character string. Directory where downloaded files will be
saved Default: "."}
}
\value{
No return value. Files are saved to the specified output directory
with naming pattern: "tun_total_0_10_2010.tif" for Tunisia
population between 0 and 10 for 2010.
}
\description{
This function downloads and processes WorldPop population raster data for
specified age bands and years. It combines male and female population data
for the requested age range.
}
\details{
\subsection{Data Source}{

This function connects to the WorldPop Unconstrained 1km Age-Sex Structured
Population dataset, publicly available at:

"https://data.worldpop.org/GIS/AgeSex_structures/
Global_2000_2020_1km/unconstrained"
\itemize{
\item \strong{Unconstrained}: Includes all populated areas, not limited to built-up
areas.
\item \strong{1 km Resolution}: Approximately 1km x 1km pixel size at the equator.
\item \strong{Age-Sex Structured}: Population counts by sex (male/female) and broad
age bands.
\item \strong{2020 Base Year}: All data references WorldPop's 2020 population
estimates.
}
}

\subsection{Overview}{

This function:
\enumerate{
\item Connects to WorldPop's unconstrained 1km resolution population data
\item Identifies all available age bands that overlap with the requested range
\item Automatically \strong{combines adjacent bands} when no single band fully covers
the range
\item Downloads and combines male and female population rasters for these bands
\item Saves the combined raster for each requested year
}
}

\subsection{Band Combination Logic}{

If the exact age range is not covered by a single WorldPop band, the function:
\itemize{
\item Finds \strong{all bands that partially or fully cover any part} of the
requested range.
\item \strong{Combines these bands together} into a single raster.
\item \strong{Informs the user} of the actual bands combined, and adjusts the output
file name accordingly.
}

For example:
\itemize{
\item Requesting \strong{ages 2-9} will combine \strong{bands 1-4 and 5-9}.
\item Requesting \strong{ages 0-10} will combine \strong{bands 0-1, 1-4, 5-9, and 10-14}.
}
}

\subsection{WorldPop File Naming and Band Mapping}{

WorldPop filenames follow the pattern:
\verb{\{iso3\}_\{sex\}_\{code\}_2020_1km.tif}

Where:
\itemize{
\item \code{{iso3}} is the lowercase ISO3 country code (e.g., "tun" for Tunisia)
\item \code{{sex}} is:
\itemize{
\item \code{"m"} for male population
\item \code{"f"} for female population
}
\item \code{{code}} is the \strong{starting age} of the band, defined as:
\itemize{
\item \code{"0"}  = ages \strong{0}
\item \code{"1"}  = ages \strong{1-4}
\item \code{"5"}  = ages \strong{5-9}
\item \code{"10"} = ages \strong{10-14}
\item \code{"15"} = ages \strong{15-19}
\item \code{"20"} = ages \strong{20-24}
\item \code{"25"} = ages \strong{25-29}
\item \code{"30"} = ages \strong{30-34}
\item \code{"35"} = ages \strong{35-39}
\item \code{"40"} = ages \strong{40-44}
\item \code{"45"} = ages \strong{45-49}
\item \code{"50"} = ages \strong{50-54}
\item \code{"55"} = ages \strong{55-59}
\item \code{"60"} = ages \strong{60-64}
\item \code{"65"} = ages \strong{65-69}
\item \code{"70"} = ages \strong{70-74}
\item \code{"75"} = ages \strong{75-79}
\item \code{"80"} = ages \strong{80+}
}
}
}

\subsection{Example Mappings}{
\itemize{
\item \code{tun_m_1_2020_1km.tif}  = Tunisia, Male, Ages 1-4
\item \code{tun_f_5_2020_1km.tif}  = Tunisia, Female, Ages 5-9
\item \code{tun_m_10_2020_1km.tif} = Tunisia, Male, Ages 10-14
}
}
}
\examples{
\dontrun{
# Download Tunisia and Gambia data for ages 1-9 for years 2020-2021
download_worldpop_age_band(
  country_codes = c("TUN", "GMB")
  years = 2020:2021,
  age_range = c(0, 9),
  out_dir = "data/worldpop"
)
}
}
